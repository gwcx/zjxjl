var isShowGame="0",gameSize="10",newsTypeId="0",page=1,newsSize="10",loading=!1;window.process={init:function(){this.load(),this.public()},load:function(){$.ajax({url:getApiDomain()+"/news",method:"POST",dataType:"json",data:{isShowGame:isShowGame,gameSize:gameSize,newsTypeId:newsTypeId,page:page,newsSize:newsSize},beforeSend:function(){$.showLoading("正在初始化")},complete:function(){$.hideLoading()},error:function(){$.hideLoading(),$.alert("服务器繁忙，请稍后再试")},success:function(e){var n=e.status;if(1==n){var i={entityUrl:e.entityUrl,news:e.news},t=template("news_data",i);$("#news_data_content").html(t)}else $.alert(e.msg)}})},doNewsLoad:function(){$("#news_data_content li").each(function(){var e=$(this).find("p.detail").attr("title");$(this).find("p.detail").html(e);var n=$(this).find("p.time span").attr("news_type_id");switch(n){case"1":$(this).find("p.time span").text("[活动公告]");break;case"2":$(this).find("p.time span").text("[手游咨询]");break;case"3":$(this).find("p.time span").text("[攻略评测]")}})},"public":function(){$(".main").infinite().on("infinite",function(){loading||$.ajax({url:getApiDomain()+"/news",method:"POST",dataType:"json",data:{isShowGame:isShowGame,gameSize:gameSize,newsTypeId:newsTypeId,page:page+1,newsSize:newsSize},beforeSend:function(){$.showLoading("正在初始化"),loading=!0},complete:function(){$.hideLoading()},error:function(){$.hideLoading(),$.alert("服务器繁忙，请稍后再试")},success:function(e){var n={entityUrl:e.entityUrl,news:e.news};if(e.news.length>=newsSize?(console.log(page),page++,loading=!1):(loading=!0,$(".main").destroyInfinite()),e.news.length>0){var i=template("news_data",n);$("#news_data_content").append(i)}}})})}},process.init();