var bannerSize="4",recommendSize="4",newsSize="3",gameSize="5",page=1,loading=!1;window.process={init:function(){this.load(),this.public()},load:function(){var e=this;$.ajax({url:getApiDomain()+"/index",method:"POST",dataType:"json",data:{bannerSize:bannerSize,recommendSize:recommendSize,newsSize:newsSize,gameSize:gameSize,page:page},beforeSend:function(){$.showLoading("正在初始化")},complete:function(){$.hideLoading()},error:function(){$.hideLoading(),$.alert("服务器繁忙，请稍后再试")},success:function(a){var n=a.status;if(1==n){var t={entityUrl:a.entityUrl,gameRecommend:a.gameRecommend,banner:a.banner,news:a.news,game:a.game},i=template("banner_data",t);$("#banner_data_content").html(i),e.doBannerLoad();var o=template("recommend_data",t);$("#recommend_data_content").html(o);var d=template("news_data",t);$("#news_data_content").html(d);var r=template("game_data",t);$("#game_data_content").html(r),page++}else $.alert(a.msg)}})},doBannerLoad:function(){var e=$(".swiper-wrapper img").length;e>=2&&$(".swiper-container").swiper({loop:!0,autoplayDisableOnInteraction:!1,autoplay:3e3})},doNewsType:function(){$("#news_data_content a").each(function(){var e=$(this).find("span.tips").attr("title");switch(e){case"1":$(this).find("span.tips").text("【公告】");break;case"2":$(this).find("span.tips").text("【咨询】");break;case"3":$(this).find("span.tips").text("【攻略】")}})},"public":function(){$(".main").infinite().on("infinite",function(){1!=page&&loading||$.ajax({url:getApiDomain()+"/index_moreGame",method:"POST",dataType:"json",data:{gameSize:gameSize,page:page},beforeSend:function(){$.showLoading("正在初始化"),loading=!0},complete:function(){$.hideLoading()},error:function(){$.hideLoading(),$.alert("服务器繁忙，请稍后再试")},success:function(e){var a={entityUrl:e.entityUrl,game:e.game};if(e.game.length>=gameSize?(page++,loading=!1):$(".main").destroyInfinite(),e.game.length>0){var n=template("game_data",a);$("#game_data_content").append(n)}}})})}},process.init();